<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Page Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>
  <h1>Main page</h1>

  <!-- <form action="/redirect" id="submit_form"> -->
  <form id="submit_form">

    <button type="submit" id="redirect_button">Redirect</button>

  </form>

  <script src='https://code.jquery.com/jquery-3.3.1.min.js' integrity='sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8='
    crossorigin='anonymous'></script>
  <script>
   
   function redirectUser() {
      setTimeout(() => {
    
          $('h1').append('<p>Redirecting</p>')
    
    
          $.ajax({
              method: 'GET',
              url: '/redirect'
            })
            .then((result) => {
              console.log(result, 'result')
              window.location = result.url
            })
            .catch((error) => {
              console.log(error, 'error')
            })
    
        }, 3000)
   }

  $('#submit_form').submit((event) =>{
    event.preventDefault();
    console.log('inside submit form event')
    redirectUser();

  })




  </script>
</body>

</html>